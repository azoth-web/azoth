<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ðŸ’Ž diamond</title>
</head>
<body>
	<main id="app">
		<h1>hello ðŸ’Ž diamond</h1>
		<section id='planets'></section>
		<section id='asteroids'></section>
	</main>
	
	<template id='template'>
		<ul data-bind>
			{{#for items}}
			<li>
				<div class="view">
					<span class="toggle">{{done}}</span>
					<label>{{name}}</label>
					<button class="destroy"></button>
				</div>
			</li>
			{{/for}}
		</ul>
	</template>
	
	<script src='../diamond.js'></script>
	<script src='./planets.js'></script>
	<script>
		var parser = Diamond.parser;
		
		const diamond = new Diamond({
			el: document.getElementById( 'planets' ),
			template: parser( `
					<h1>planets...</h1>
					<ul>
						{{#for planets}}
						<li>{{planet}}</li>
						{{/for}}
					</ul>
					
					<h2>minor planets...</h2>
					<ul>
						{{#for asteroids}}
						<li>{{{{readable_des}} ({{epoch}})</li>
						{{/for}}
					</ul>`, { live: true } ),
			data: {
				planets
			}
		});
		
		var url =  'http://www.asterank.com/api/mpc'
		var request = new Request( 'http://www.colourlovers.com/api/colors?format=json', {
			method: 'GET', 
			mode: 'no-cors'
		});
		
		self.fetch( url )
			.then( r => r.json() )
			.then( asteroids => {
				console.time( `${asteroids.length} asteroids set` );
				diamond.context.set( 'asteroids', asteroids );
				console.timeEnd( `${asteroids.length} asteroids set` );
			})
			.catch( err => console.error( err ) );
	

	</script>
	
</body>
</html>
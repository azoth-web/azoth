<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ðŸ’Ždiamond</title>
	
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<main class='todo-app'>
		<ul class='todo-list' id='target'></ul>
	</main>
	
	<script src='getData.js'></script>
	<script src='../diamond.js'></script>
	
	<template id='todo'>
		<li>
			<div class="view">
				<span data-bind="a1" class="toggle"></span>
				<label data-bind="t1"></label>
				<button class="destroy"></button>
			</div>
			<span data-bind="t1" class="edit"></span>
		</li>
	</template>
	
	<template id='section'>
		<for-section data-bind="s1"></for-section>
	</template>
	
	<script>
		
		var bound = Diamond.bound;
		
		function getTemplate() {
				
			const a1 = bound.attribute( 'data-done', { ref: 'done' } );
			const t1 = bound.text( { ref: 'name' } );
	
			const s1 = bound.section( { type: 'for', ref: 'items' }, {
				fragment: Diamond.clean( document.getElementById('todo').content.cloneNode( true ) ),
				bindings: { a1, t1 }
			});

			return {
				fragment: Diamond.clean( document.getElementById('section').content.cloneNode( true ) ),
				bindings: { s1 }
			};
		}
		
		console.time( 'render' );
		
		new Diamond({
			el: document.getElementById( 'target' ),
			template: getTemplate(),
			data: { items: getData() }
		});
		
		console.timeEnd( 'render' );
		
	</script>
</body>
</html>